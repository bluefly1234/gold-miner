window.__require=function e(t,i,n){function s(a,c){if(!i[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var h="function"==typeof __require&&__require;if(!c&&h)return h(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var l=i[a]={exports:{}};t[a][0].call(l.exports,function(e){return s(t[a][1][e]||e)},l,l.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<n.length;a++)s(n[a]);return s}({Config:[function(e,t,i){"use strict";cc._RF.push(t,"894cdbn8+tC+o5muK2cpuWn","Config"),t.exports={"bone-0":{score:10,speed:6},"bone-1":{score:10,speed:6},"bone-2":{score:50,speed:3},"bone-3":{score:10,speed:6},diamond:{score:500,speed:6},"stone-0":{score:30,speed:3},"stone-1":{score:30,speed:3},"gold-0-0":{score:100,speed:4},"gold-0-1":{score:200,speed:3},"gold-0-2":{score:300,speed:2},"gold-1-0":{score:100,speed:4},"gold-1-1":{score:200,speed:3},"gold-1-2":{score:300,speed:2}},cc._RF.pop()},{}],Game:[function(e,t,i){"use strict";cc._RF.push(t,"6a5d1Z5jJVEB4TYP9TIpqfy","Game");var n=e("./Utils"),s=e("./Config");cc.Class({extends:cc.Component,properties:{speed:{default:4,displayName:"\u94a9\u5b50\u901f\u5ea6"},rotateSpeed:{default:1.5,displayName:"\u94a9\u5b50\u65cb\u8f6c\u901f\u5ea6"},hookRange:{default:70,displayName:"\u94a9\u5b50\u65cb\u8f6c\u89d2\u5ea6\u8303\u56f4"},hook:cc.Node,hookItem:cc.Node,scoreLabel:cc.Label,targetLabel:cc.Label,levelLabel:cc.Label,timerLabel:cc.Label},onLoad:function(){cc.director.getCollisionManager().enabled=!0,this.time=60,this.level=1,this.score=0,this.target=0,this.hookHeight=this.hook.height,this.itemPanel=cc.find("Canvas/item-panel"),this.itemPanel.getComponent(cc.Widget).updateAlignment(),this.itemArr=[];for(var e=cc.find("Canvas/item-temp").children,t=0;t<e.length;t++)e[t].active=!1,this.itemArr.push(e[t]);this.setLevelInfo(),this.addAnimation()},addAnimation:function(){var e=this;cc.resources.load("atlas/miner-sheet-1",cc.SpriteAtlas,function(t,i){t||(e.atlas=i,e.minerAnimation=n.addAnimation(cc.find("Canvas/miner"),e.atlas,"miner-pull-light-",6,"pull"))})},update:function(e){switch(this.hookState){case 0:this.hook.angle>=this.hookRange?this.rotateSpeed=-this.rotateSpeed:this.hook.angle<=-this.hookRange&&(this.rotateSpeed=Math.abs(this.rotateSpeed)),this.hook.angle+=this.rotateSpeed;break;case 1:this.hook.height+=this.speed;break;case 2:this.hook.height<=this.hookHeight?(this.resetState(),this.score+=this.gainScore,this.scoreLabel.string=this.score,0==this.itemPanel.children.length&&(this.unschedule(this.timerCallback),this.gameOver())):this.hook.height-=this.speed}},resetState:function(){this.hookState=0,this.hook.height=this.hookHeight,this.minerAnimation&&this.minerAnimation.stop("pull"),this.speed=4,this.hookItem.removeAllChildren()},emitHook:function(){this.hookState||(this.hookState=1)},catchItem:function(e){1==this.hookState&&(this.gainScore=0,this.hookState=2,this.minerAnimation&&this.minerAnimation.play("pull"),this.speed=4,"Wall"!==e.group&&(e.group="default",e.x=0,e.y=0,e.angle=-this.hook.angle,e.parent=this.hookItem,e.anchorY=.9,this.speed=s[e.name].speed,this.gainScore=s[e.name].score))},setLevelInfo:function(){this.itemPanel.removeAllChildren(),this.hookState=0,this.setTimer(),this.levelLabel.string=this.level,this.score=0,this.scoreLabel.string=this.score,this.target=1e3+500*(this.level-1),this.targetLabel.string=this.target;for(var e=1.5*this.target,t=0;t<e;){var i=n.randomRangeInt(0,this.itemArr.length),o=cc.instantiate(this.itemArr[i]);o.parent=this.itemPanel,o.position=this.randomPos(),o.active=!0,t+=s[o.name].score}cc.log(this.itemPanel.width),cc.log(this.itemPanel.getContentSize())},randomPos:function(){var e=(this.itemPanel.width-30)/2*n.randomRange(-1,1),t=(this.itemPanel.height-30)/2*n.randomRange(-1,1);return cc.v2(e,t)},setTimer:function(){this.time=60,this.timerLabel.string=this.time,this.timerCallback=function(){this.time--,this.timerLabel.string=this.time,0==this.time&&(this.unschedule(this.timerCallback),this.gameOver())},this.schedule(this.timerCallback,1)},gameOver:function(){cc.director.pause();var e=cc.find("Canvas/game-over");this.score>=this.target?(this.bSuccess=!0,cc.find("btn-next/label",e).getComponent(cc.Label).string="\u4e0b\u4e00\u5173"):(this.bSuccess=!1,cc.find("btn-next/label",e).getComponent(cc.Label).string="\u9000\u51fa\u6e38\u620f"),e.active=!0},onClickRestart:function(){cc.find("Canvas/game-over").active=!1,cc.director.resume(),this.resetState(),this.setLevelInfo()},onClickNext:function(){this.bSuccess?(cc.find("Canvas/game-over").active=!1,cc.director.resume(),this.resetState(),this.level++,this.setLevelInfo()):(cc.director.resume(),cc.director.loadScene("Home"))}}),cc._RF.pop()},{"./Config":"Config","./Utils":"Utils"}],Home:[function(e,t,i){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","Home");var n=e("./Utils");cc.Class({extends:cc.Component,properties:{light:cc.Node,bgMusic:{default:null,type:cc.AudioClip}},onLoad:function(){var e=this;cc.audioEngine.playMusic(this.bgMusic,!0),cc.tween(this.light).repeatForever(cc.tween().to(1,{opacity:0}).to(1,{opacity:255})).start(),this.atlas=null,cc.resources.load("atlas/general-sheet",cc.SpriteAtlas,function(t,i){t||(e.atlas=i,n.addAnimation(cc.find("Canvas/miner/leg"),e.atlas,"miner-leg-",3).play("miner-leg-"),n.addAnimation(cc.find("Canvas/miner/face"),e.atlas,"miner-face-whistle-",3).play("miner-face-whistle-"))})},update:function(e){},onClickStart:function(){cc.director.loadScene("Game")}}),cc._RF.pop()},{"./Utils":"Utils"}],Hook:[function(e,t,i){"use strict";cc._RF.push(t,"6ff8aAXnLVKHZvobZD0MsME","Hook"),cc.Class({extends:cc.Component,properties:{},start:function(){},onCollisionEnter:function(e,t){cc.find("Canvas").getComponent("Game").catchItem(e.node)}}),cc._RF.pop()},{}],Utils:[function(e,t,i){"use strict";cc._RF.push(t,"6a9ddRBo2ZMZ6pffJ4BMFny","Utils"),t.exports={addAnimation:function(e,t,i,n,s,o){void 0===o&&(o=cc.WrapMode.Loop),s||(s=i);var a=e.getComponent(cc.Animation);a||(a=e.addComponent(cc.Animation));for(var c=[],r=0;r<n;r++)c.push(t.getSpriteFrame(i+r));var h=cc.AnimationClip.createWithSpriteFrames(c,n);return h.name=s,h.wrapMode=o,a.addClip(h),a},randomRange:function(e,t){return Math.random()*(t-e)+e},randomRangeInt:function(e,t){return Math.floor(this.randomRange(e,t))}},cc._RF.pop()},{}],antiAlias:[function(e,t,i){"use strict";cc._RF.push(t,"c8f17QYVr1LDYpcPPKaPMQD","antiAlias"),cc.macro.ENABLE_WEBGL_ANTIALIAS=!0,cc._RF.pop()},{}]},{},["Config","Game","Home","Hook","Utils","antiAlias"]);